<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/odinson/assets/css/just-the-docs-default.css"> <script src="/odinson/assets/js/vendor/lunr.min.js"></script> <script src="/odinson/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Event Queries | odinson</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="Event Queries" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Odinson is a powerful and highly optimized open-source framework for rule-based information extraction. Odinson couples a simple, yet powerful pattern language that can operate over multiple representations of text, with a runtime system that operates in near real time." /> <meta property="og:description" content="Odinson is a powerful and highly optimized open-source framework for rule-based information extraction. Odinson couples a simple, yet powerful pattern language that can operate over multiple representations of text, with a runtime system that operates in near real time." /> <link rel="canonical" href="https://docs.lum.ai/odinson/odinson/event_queries.html" /> <meta property="og:url" content="https://docs.lum.ai/odinson/odinson/event_queries.html" /> <meta property="og:site_name" content="odinson" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Event Queries" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Odinson is a powerful and highly optimized open-source framework for rule-based information extraction. Odinson couples a simple, yet powerful pattern language that can operate over multiple representations of text, with a runtime system that operates in near real time.","headline":"Event Queries","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://docs.lum.ai/odinson/odinson/images/odinson_with_logo.png"}},"url":"https://docs.lum.ai/odinson/odinson/event_queries.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/odinson/" class="site-title lh-tight"> <div class="site-logo" role="img" aria-label="odinson"></div> </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/odinson/" class="nav-list-link">Overview</a></li><li class="nav-list-item"><a href="/odinson/contributors.html" class="nav-list-link">Contributors</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Getting Started category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/odinson/installation.html" class="nav-list-link">Getting Started</a><ul class="nav-list"><li class="nav-list-item "><a href="/odinson/walkthrough.html" class="nav-list-link">Walkthrough Example</a></li><li class="nav-list-item "><a href="/odinson/docker.html" class="nav-list-link">Docker</a></li><li class="nav-list-item "><a href="/odinson/documents.html" class="nav-list-link">Creating Odinson Documents</a></li><li class="nav-list-item "><a href="/odinson/making_index.html" class="nav-list-link">Creating an Index</a></li></ul></li><li class="nav-list-item active"><button class="nav-list-expander btn-reset" aria-label="toggle items in Queries category" aria-pressed="true"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/odinson/queries.html" class="nav-list-link">Queries</a><ul class="nav-list"><li class="nav-list-item "><a href="/odinson/token_constraints.html" class="nav-list-link">Token Constraints</a></li><li class="nav-list-item "><a href="/odinson/graph_traversals.html" class="nav-list-link">Graph Traversals</a></li><li class="nav-list-item "><a href="/odinson/basic_queries.html" class="nav-list-link">Basic Queries</a></li><li class="nav-list-item active"><a href="/odinson/event_queries.html" class="nav-list-link active">Event Queries</a></li><li class="nav-list-item "><a href="/odinson/parent_queries.html" class="nav-list-link">Parent Queries</a></li><li class="nav-list-item "><a href="/odinson/quantifiers.html" class="nav-list-link">Quantifiers</a></li><li class="nav-list-item "><a href="/odinson/strings.html" class="nav-list-link">Strings</a></li><li class="nav-list-item "><a href="/odinson/metadata.html" class="nav-list-link">Metadata Query Language</a></li></ul></li><li class="nav-list-item"><a href="/odinson/shell.html" class="nav-list-link">Odinson shell</a></li><li class="nav-list-item"><a href="/odinson/offline-documentation.html" class="nav-list-link">Offline Documentation</a></li><li class="nav-list-item"><a href="/odinson/testing.html" class="nav-list-link">Testing</a></li><li class="nav-list-item"><a href="/odinson/troubleshooting.html" class="nav-list-link">Troubleshooting</a></li><li class="nav-list-item"><a href="/odinson/contributing.html" class="nav-list-link">Contributing</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search odinson" aria-label="Search odinson" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/odinson/queries.html">Queries</a></li> <li class="breadcrumb-nav-list-item"><span>Event Queries</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="event-queries"> <a href="#event-queries" class="anchor-heading" aria-labelledby="event-queries"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Event queries </h1> <p>Odinson also supports <strong>event queries</strong>, which are look for a trigger, and then one or more required (or optional) arguments. These arguments are defined in terms of their connection to the found trigger.</p> <p>As an example, consider this simple event rule that finds the subject and object of the verb <em>cause</em>:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  - name: example-event-rule
    label: Causal
    type: event
    priority: 1
    pattern: |
      trigger = causes
      subject = &gt;nsubj []
      object = &gt;dobj [] 
</code></pre></div></div> <p>The result of applying this rule to a sentence such as “Rain causes puddles” is a Mention, which has a trigger (<em>causes</em>), and two arguments: a <code class="language-plaintext highlighter-rouge">subject</code> (<em>Rainfall</em>), and an <code class="language-plaintext highlighter-rouge">object</code> (<em>puddles</em>). Since we did not specify any labels for the <em>type</em> of the subject and object arguments, they will have the same label as the overall event (<code class="language-plaintext highlighter-rouge">Causal</code>).</p> <h2 id="priorities"> <a href="#priorities" class="anchor-heading" aria-labelledby="priorities"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Priorities </h2> <p>One element of an event query is the <code class="language-plaintext highlighter-rouge">priority</code>. This is the order in which the rule(s) should be applied. This is useful when you wish to rely on the output of a previous rule in another rule. For example, in these two rules, we first find <code class="language-plaintext highlighter-rouge">Person</code> Mentions, and then extract <code class="language-plaintext highlighter-rouge">Construction</code> events:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  - name: person-rule
    label: Person
    type: basic
    priority: 1
    pattern: |
       [Hamilton]

  - name: construction-rule
    label: Construction
    type: event
    priority: 2
    pattern: |
      trigger = [lemma=build]
      subject: Person = &gt;nsubj [] 
</code></pre></div></div> <p>Here, the engine will first apply <code class="language-plaintext highlighter-rouge">person-rule</code>, then <code class="language-plaintext highlighter-rouge">construction-rule</code>, due to the order indicated with the priorities. By adding the type specification to the <code class="language-plaintext highlighter-rouge">subject</code> argument (<code class="language-plaintext highlighter-rouge">subject: Person</code>), we indicate that the subject of the trigger <em>must</em> be a previously found <code class="language-plaintext highlighter-rouge">Person</code>. However, if we instead want to allow the rule to match <em>even if</em> the found subject is <em>not</em> a <code class="language-plaintext highlighter-rouge">Person</code>, we can make use of <strong>promotion</strong>.</p> <h2 id="argument-promotion"> <a href="#argument-promotion" class="anchor-heading" aria-labelledby="argument-promotion"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Argument Promotion </h2> <p>Argument promotion allows us to extract nested events in the moment, without requiring them to have been previously found. This feature must be enabled, using the <code class="language-plaintext highlighter-rouge">^</code>, as shown here:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  - name: construction-rule
    label: Construction
    type: event
    priority: 2
    pattern: |
      trigger = [lemma=build]
      subject: ^Person = &gt;nsubj []
</code></pre></div></div> <p>Here, if the subject was not already found as a <code class="language-plaintext highlighter-rouge">Person</code>, we will <em>still</em> extract the event, and we will assign the label <code class="language-plaintext highlighter-rouge">Person</code> to the found subject.</p> <h2 id="optional-and-required-arguments"> <a href="#optional-and-required-arguments" class="anchor-heading" aria-labelledby="optional-and-required-arguments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Optional and Required Arguments </h2> <p>Event arguments can either be optional or required, where required is the default. An optional argument will be extracted if present, but will not prevent the event from succeeding if not. Required arguments, on the other hand, will cause the event query to fail if they are not found. Optional arguments are indicated with a <code class="language-plaintext highlighter-rouge">?</code>, as with the second argument below.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  - name: construction-rule
    label: Construction
    type: event
    priority: 2
    pattern: |
      trigger = [lemma=build]
      subject: Person = &gt;nsubj []
      structure: Building? = &gt;dobj []
</code></pre></div></div> <h2 id="quantifying-arguments"> <a href="#quantifying-arguments" class="anchor-heading" aria-labelledby="quantifying-arguments"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Quantifying arguments </h2> <p>Arguments can be quantified, using the quantifiers described <a href="quantifiers.html">here</a>. For example:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  - name: lots-of-quantifiers
    label: Eating
    type: event
    priority: 2
    pattern: |
      trigger = [eats]
      subject: Person{1,2} = &gt;nsubj []
      food: ^Dessert+ = &gt;dobj
      tool: ^Utensil* = &gt;nmod_with
</code></pre></div></div> <p>In order to succeed, this query must find an instance of the word <code class="language-plaintext highlighter-rouge">eats</code> with one or 2 <code class="language-plaintext highlighter-rouge">Person</code> mentions as the subject(s), and one or more <code class="language-plaintext highlighter-rouge">Dessert</code> mentions as food arguments. If available, it will also match 0 or more <code class="language-plaintext highlighter-rouge">Utensil</code> mentions as tool arguments.</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
